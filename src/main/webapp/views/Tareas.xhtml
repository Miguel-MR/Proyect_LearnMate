<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:h="http://xmlns.jcp.org/jsf/html">

    <body>
        <ui:composition template="./TemplateSitio.xhtml">
            <ui:define name="content">

                <div class="container-fluid">
                    <h1 class="all-tittles">Sistema Escolar 
                        <small>Evaluación y Seguimiento</small>
                    </h1>

                    <ul class="nav nav-tabs nav-justified">
                        <li class="active"><a href="crearActividad.xhtml">Creación de Actividades</a></li>
                        <li><a href="actividades.xhtml">Actividades Asignadas</a></li>
                        <li><a href="asistencia.xhtml">Asistencia</a></li>
                    </ul>

                    <div class="container-fluid" style="margin: 50px 0;">
                        <div class="row">
                            <div class="col-xs-12 col-sm-4 col-md-3">
                                <img src="#{request.contextPath}/resources/assets/img/testing.png" 
                                     alt="calendar" class="img-responsive center-box" 
                                     style="max-width: 110px;"/>
                            </div>
                            <div class="col-xs-12 col-sm-8 col-md-8 text-justify lead">
                                Bienvenido a esta sección, aquí podrá crear y asignar actividades y tareas a cursos, materias y estudiantes.
                            </div>
                        </div>
                    </div>

                    <!-- ==================================================== -->
                    <!-- =============== FORMULARIO ACTIVIDAD =============== -->
                    <!-- ==================================================== -->
                    <div class="container-fluid" style="margin-bottom:40px;">
                        <h2>Creación de Actividades</h2>
                        <h:form enctype="multipart/form-data" styleClass="needs-validation row g-3">

                            <!-- NOMBRE ACTIVIDAD -->
                            <div class="col-md-4">
                                <h:outputLabel for="nombre" value="Nombre de Actividad" styleClass="form-label"/>
                                <h:inputText id="nombre" value="#{controllerActividad.actividad.nombre}" 
                                             required="true" styleClass="form-control"
                                             requiredMessage="El nombre de la actividad es obligatorio."/>
                                <h:message for="nombre" style="color:red"/>
                            </div>

                            <!-- TIPO DE ACTIVIDAD -->
                            <div class="col-md-4">
                                <h:outputLabel for="tipo" value="Tipo de Actividad" styleClass="form-label"/>
                                <h:selectOneMenu id="tipo" value="#{controllerActividad.actividad.tipoActividad}" 
                                                 styleClass="form-control" required="true"
                                                 requiredMessage="Seleccione el tipo de actividad.">
                                    <f:selectItem itemLabel="-- Seleccione --" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItem itemLabel="Tarea" itemValue="Tarea"/>
                                    <f:selectItem itemLabel="Examen" itemValue="Examen"/>
                                    <f:selectItem itemLabel="Proyecto" itemValue="Proyecto"/>
                                    <f:selectItem itemLabel="Trabajo en Clase" itemValue="Trabajo en Clase"/>
                                </h:selectOneMenu>
                                <h:message for="tipo" style="color:red"/>
                            </div>

                            <!-- VALOR -->
                            <div class="col-md-4">
                                <h:outputLabel for="valor" value="Valor / Porcentaje" styleClass="form-label"/>
                                <h:inputText id="valor" value="#{controllerActividad.actividad.valor}" 
                                             styleClass="form-control" required="true"
                                             requiredMessage="Ingrese el valor o porcentaje de la actividad."/>
                                <h:message for="valor" style="color:red"/>
                            </div>

                            <!-- FECHA INICIO -->
                            <div class="col-md-4">
                                <h:outputLabel for="fechaInicio" value="Fecha Inicio" styleClass="form-label"/>
                                <h:inputText id="fechaInicio" value="#{controllerActividad.actividad.fechaInicio}" 
                                             required="true" styleClass="form-control"
                                             requiredMessage="Ingrese la fecha de inicio.">
                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                    <f:passThroughAttribute name="type" value="date"/>
                                </h:inputText>
                                <h:message for="fechaInicio" style="color:red"/>
                            </div>

                            <!-- FECHA ENTREGA -->
                            <div class="col-md-4">
                                <h:outputLabel for="fechaFin" value="Fecha Entrega" styleClass="form-label"/>
                                <h:inputText id="fechaFin" value="#{controllerActividad.actividad.fechaFin}" 
                                             required="true" styleClass="form-control"
                                             requiredMessage="Ingrese la fecha de entrega.">
                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                    <f:passThroughAttribute name="type" value="date"/>
                                </h:inputText>
                                <h:message for="fechaFin" style="color:red"/>
                            </div>

                            <!-- CURSO -->
                            <div class="col-md-4">
                                <h:outputLabel for="curso" value="Curso" styleClass="form-label"/>
                                <h:selectOneMenu id="curso" value="#{controllerActividad.actividad.curso}" 
                                                 required="true" styleClass="form-control"
                                                 requiredMessage="Seleccione un curso.">
                                    <f:selectItem itemLabel="-- Seleccione el curso --" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{controllerActividad.listaCursos}" var="curso" 
                                                   itemLabel="#{curso.nombreCurso}" itemValue="#{curso}"/>
                                </h:selectOneMenu>
                                <h:message for="curso" style="color:red"/>
                            </div>

                            <!-- MATERIA -->
                            <div class="col-md-4">
                                <h:outputLabel for="materia" value="Materia" styleClass="form-label"/>
                                <h:selectOneMenu id="materia" value="#{controllerActividad.actividad.materia}" 
                                                 required="true" styleClass="form-control"
                                                 requiredMessage="Seleccione una materia.">
                                    <f:selectItem itemLabel="-- Seleccione la materia --" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{controllerActividad.listaMaterias}" var="materia" 
                                                   itemLabel="#{materia.nombre}" itemValue="#{materia}"/>
                                </h:selectOneMenu>
                                <h:message for="materia" style="color:red"/>
                            </div>

                            <!-- DOCENTE -->
                            <div class="col-md-4">
                                <h:outputLabel for="docente" value="Docente Asignado" styleClass="form-label"/>
                                <h:selectOneMenu id="docente" value="#{controllerActividad.actividad.docente}" 
                                                 required="true" styleClass="form-control"
                                                 requiredMessage="Seleccione un docente.">
                                    <f:selectItem itemLabel="-- Seleccione el docente --" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{controllerActividad.listaDocentes}" var="docente" 
                                                   itemLabel="#{docente.primerNombre} #{docente.primerApellido}" 
                                                   itemValue="#{docente}"/>
                                </h:selectOneMenu>
                                <h:message for="docente" style="color:red"/>
                            </div>

                            <!-- DESCRIPCIÓN -->
                            <div class="col-md-12">
                                <h:outputLabel for="descripcion" value="Descripción de la Actividad" styleClass="form-label"/>
                                <h:inputTextarea id="descripcion" value="#{controllerActividad.actividad.descripcion}" 
                                                 styleClass="form-control" required="true" rows="4"
                                                 requiredMessage="Debe ingresar una descripción."/>
                                <h:message for="descripcion" style="color:red"/>
                            </div>

                            <!-- ARCHIVO -->
                            <div class="col-md-12">
                                <h:outputLabel value="Seleccionar Archivo" for="archivo" styleClass="form-label"/>
                                <h:inputFile id="archivo" value="#{controllerActividad.archivo}" required="false"/>
                            </div>

                            <!-- BOTÓN -->
                            <div class="col-12 text-center" style="margin-top: 20px;">
                                <h:commandButton value="Registrar Actividad" 
                                                 action="#{controllerActividad.registrarActividad()}"
                                                 styleClass="btn btn-primary"/>
                                <h:messages globalOnly="true" style="color:green"/>
                            </div>
                        </h:form>
                    </div>

                    <!-- ==================================================== -->
                    <!-- =============== FORMULARIO TAREAS ================= -->
                    <!-- ==================================================== -->
                    <div class="container-fluid">
                        <h2>Gestión de Tareas</h2>
                        <h:form styleClass="row g-3">

                            <!-- NOMBRE TAREA -->
                            <div class="col-md-4">
                                <h:outputLabel for="nombreTarea" value="Nombre de la Tarea" styleClass="form-label"/>
                                <h:inputText id="nombreTarea" value="#{tareasController.tareaNueva.nombreTarea}" 
                                             styleClass="form-control" required="true"
                                             requiredMessage="El nombre de la tarea es obligatorio."/>
                                <h:message for="nombreTarea" style="color:red"/>
                            </div>

                            <!-- FECHA ENTREGA -->
                            <div class="col-md-4">
                                <h:outputLabel for="fechaEntrega" value="Fecha de Entrega" styleClass="form-label"/>
                                <h:inputText id="fechaEntrega" value="#{tareasController.tareaNueva.fechaEntrega}">
                                    <f:convertDateTime pattern="yyyy-MM-dd"/>
                                    <f:passThroughAttribute name="type" value="date"/>
                                </h:inputText>
                                <h:message for="fechaEntrega" style="color:red"/>
                            </div>

                            <!-- ASIGNACIÓN -->
                            <div class="col-md-4">
                                <h:outputLabel for="asignacion" value="Asignación" styleClass="form-label"/>
                                <h:selectOneMenu id="asignacion" value="#{tareasController.idAsignacionSeleccionada}" 
                                                 styleClass="form-control">
                                    <f:selectItem itemLabel="-- Seleccione una asignación --" itemValue="#{null}" noSelectionOption="true"/>
                                    <f:selectItems value="#{tareasController.listaAsignaciones}" var="asig" 
                                                   itemLabel="#{asig.asignaturaId.nombreAsignatura}" 
                                                   itemValue="#{asig.asignacionId}"/>
                                </h:selectOneMenu>
                            </div>

                            <!-- BOTÓN GUARDAR -->
                            <div class="col-12 text-center" style="margin-top: 20px;">
                                <h:commandButton value="Registrar Tarea" 
                                                 action="#{tareasController.crearTarea()}"
                                                 styleClass="btn btn-success"/>
                                <h:messages globalOnly="true" style="color:green"/>
                            </div>
                        </h:form>
                    </div>
                </div>
            </ui:define>
        </ui:composition>
    </body>
</html>
