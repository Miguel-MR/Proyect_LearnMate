<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html">
<head>
    <title>Mapa</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        .map-wrapper {
            width: 100%;
            max-width: 900px;
            margin: 0 auto;
            position: relative;
            height: 500px;
            border: 2px solid #222; 
            overflow: hidden;        
            background: #fff;        
            box-sizing: border-box;  
        }
        #map {
            width: 100%;
            height: 100%;
            position: absolute;
            top: 0;
            left: 0;
        }
        .leaflet-container {
            width: 100%;
            height: 100%;
        }
    </style>
</head>
<body>
    <ui:composition template="./TemplateSitio.xhtml">
        <ui:define name="content">
            <h1 class="all-tittles">Mapa</h1>
            <div class="map-wrapper">
                <div id="map"></div>
            </div>
            <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
            <script>
                var map = L.map('map').setView([4.60971, -74.08175], 12);
                L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
                    attribution: 'Â© OpenStreetMap contributors'
                }).addTo(map);

                // Consumir API Nominatim
                fetch('https://nominatim.openstreetmap.org/search?city=Bogota&amp;country=Colombia&amp;format=json')
                    .then(response => response.json())
                    .then(data => {
                        data.forEach(lugar => {
                            L.marker([lugar.lat, lugar.lon])
                                .addTo(map)
                                .bindPopup(lugar.display_name);
                        });
                    })
                    .catch(error => console.error('Error al consumir la API:', error));

                var LIcon = L.Icon.Default;
                LIcon.mergeOptions({
                    iconRetinaUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon-2x.png',
                    iconUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-icon.png',
                    shadowUrl: 'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'
                });
            </script>
        </ui:define>
    </ui:composition>
</body>
</html>